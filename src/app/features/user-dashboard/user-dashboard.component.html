<section class="relative overflow-hidden">
  <app-astro-side></app-astro-side>
  <div class="w-3/4 absolute top-0 bg-(--color-azure-100) h-full px-20 max-md:px-6 max-lg:pb-20 max-lg:relative max-lg:w-full">
    <div class="mb-4">
      <div class="py-5">
        <h1 class="font-bold text-2xl text-(--color-azure-500)">
          GitHub username
        </h1>
        <p class="text-(--color-azure-400) pt-2">
          Search the desired GitHub user to see their repos, follower and other
          cool information.
        </p>
      </div>
      <div class="flex gap-2 mt-2">
        <input
          [(ngModel)]="username"
          (keyup.enter)="loadUser()"
          class="flex-1 px-3 py-2 border border-(--color-azure-300) rounded focus:outline-none focus:ring-2 focus:ring-(--color-azure-200)"
          placeholder="e.g. TreciaKS"
        />
        <button
          (click)="loadUser()"
          class="px-4 py-2 text-white bg-(--color-azure-300) rounded cursor-pointer"
        >
          Search
        </button>
      </div>
    </div>

    <app-loader *ngIf="loading"></app-loader>

    <section *ngIf="user && !loading" class="p-6 bg-white rounded shadow">
      <div class="flex items-start gap-4">
        <img [src]="user.avatar_url" class="w-20 h-20 rounded" alt="avatar" />
        <div>
          <h2 class="text-xl font-semibold">{{ user.name || user.login }}</h2>
          <p class="text-sm text-gray-600">{{ user.bio }}</p>
          <div class="mt-2 text-sm text-gray-500">
            <span class="mr-4">Repos: {{ user.public_repos }}</span>
            <span class="mr-4">Followers: {{ user.followers }}</span>
            <span>Following: {{ user.following }}</span>
          </div>
          <a
            [href]="user.html_url"
            target="_blank"
            class="inline-block mt-2 text-sm text-blue-600"
            >View on GitHub</a
          >
        </div>
      </div>
    </section>

    <div *ngIf="repos.length && !loading" class="mt-6 space-y-2 overflow-y-scroll h-145">
      <app-repo-card *ngFor="let repo of repos" [repo]="repo"></app-repo-card>
    </div>

    <app-not-found
      *ngIf="emptySearch"
      message="Enter a GitHub username"
      suggestion="Type a name to explore their profile and repos."
    >
    </app-not-found>

    <app-not-found
      *ngIf="notFound"
      message="User not found"
      suggestion="Double-check the username or try another."
    >
    </app-not-found>
  </div>
</section>
